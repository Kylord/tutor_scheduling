-- Document each column name
-- Make sure you are using names consistently
-- Think about maybe making Tables capitalized not all caps, SQL KEYWORDS all caps and columns lower case
-- Add some more test data (maybe all at end of file?)
-- Use consistent indenting

DROP TABLE IF EXISTS TUTOR_SCHEDULE;
DROP TABLE IF EXISTS TIME_SLOT;
DROP TABLE IF EXISTS PROBSET;
DROP TABLE IF EXISTS ROLE_T; 
DROP TABLE IF EXISTS COURSE;
DROP TABLE IF EXISTS USER_T; 

CREATE TABLE USER_T(
	HAWKID VARCHAR(45) NOT NULL, 
	HASHED_PSSWRD VARCHAR(45) NOT NULL, 
	IS_ADMIN BOOLEAN NOT NULL, 
	FIRST_NAME VARCHAR(45), 
	LAST_NAME VARCHAR(45), 
	EMAIL VARCHAR(45),
	PRIMARY KEY(HAWKID)
); 

CREATE TABLE COURSE (
    COURSE_ID VARCHAR(45) NOT NULL,
    DEPARTMENT VARCHAR(45) NOT NULL,
    COURSE_NUM INT NOT NULL,
	COURSE_FRIENDLY VARCHAR(45),
    PRIMARY KEY (COURSE_ID)
);

CREATE TABLE ROLE_T (
	DESCRIPTION VARCHAR(45) NOT NULL, 
	HAWKID VARCHAR(45) NOT NULL, 
	COURSE_ID VARCHAR(45) NOT NULL,
	PRIMARY KEY (HAWKID, COURSE_ID), 
	FOREIGN KEY (HAWKID) REFERENCES USER_T(HAWKID), 
	FOREIGN KEY (COURSE_ID) REFERENCES COURSE(COURSE_ID)
);

--Table for probset info --
CREATE TABLE PROBSET (
    PROBSET_ID INT  NOT NULL AUTO_INCREMENT, 
	TEXT VARCHAR(100000) NOT NULL,
	COURSE_ID VARCHAR(45) NOT NULL,
	PRIMARY KEY (PROBSET_ID),
	FOREIGN KEY (COURSE_ID) REFERENCES COURSE(COURSE_ID)
);

/* problem sets table */
CREATE TABLE TIME_SLOT (
	SESSION_NO INT NOT NULL AUTO_INCREMENT, 
	DATE_TIME VARCHAR(45),
	CANCELLED_BY_STUD BOOLEAN,
	CANCELLED_BY_TUTOR BOOLEAN,
	IS_BOOKED BOOLEAN,
	COURSE_ID VARCHAR(45) NOT NULL,
	HAWKID VARCHAR(45) NOT NULL, 
	PRIMARY KEY (SESSION_NO),
	FOREIGN KEY (HAWKID) REFERENCES ROLE_T (HAWKID),
	FOREIGN KEY (COURSE_ID) REFERENCES ROLE_T (COURSE_ID)
);

CREATE TABLE TUTOR_SCHEDULE (
       TS_ID INT AUTO_INCREMENT,
       WEEK_DAY VARCHAR(45),
	NUM_TIME_SLOTS INT,
	HAWKID VARCHAR(45) NOT NULL, 
	COURSE_ID VARCHAR(45) NOT NULL,
	FOREIGN KEY (HAWKID) REFERENCES ROLE_T (HAWKID),
	FOREIGN KEY (COURSE_ID) REFERENCES ROLE_T (COURSE_ID),
	PRIMARY KEY (TS_ID)
);


-- TEST DATA FOLLOWS
/* course table */
INSERT INTO COURSE (COURSE_ID, DEPARTMENT, COURSE_NUM, COURSE_FRIENDLY) VALUES ("CS1120", "Computer Science", "1120", "CS 1120: Introduction to Computer Science");
INSERT INTO COURSE (COURSE_ID, DEPARTMENT, COURSE_NUM, COURSE_FRIENDLY) VALUES ("MATH1340", "Math", "1340", "MATH 1340: Calulus I");
INSERT INTO COURSE (COURSE_ID, DEPARTMENT, COURSE_NUM, COURSE_FRIENDLY) VALUES ("PHYS1440", "Physics", "1440", "PHYS 1440: Introductory Physics");

INSERT INTO USER_T (HAWKID, HASHED_PSSWRD, IS_ADMIN, FIRST_NAME, LAST_NAME, EMAIL) VALUES ("jsmith", "password", "true", "John", "Smith", "jsmith@uiowa.edu");
INSERT INTO USER_T (HAWKID, HASHED_PSSWRD, IS_ADMIN, FIRST_NAME, LAST_NAME, EMAIL) VALUES ("awolmutt", "password", "false", "Aaron", "Wolmutt", "awolmutt@uiowa.edu");
INSERT INTO USER_T (HAWKID, HASHED_PSSWRD, IS_ADMIN, FIRST_NAME, LAST_NAME, EMAIL) VALUES ("jdoe", "password", "false", "John", "Doe", "jdoe@uiowa.edu");
INSERT INTO USER_T (HAWKID, HASHED_PSSWRD, IS_ADMIN, FIRST_NAME, LAST_NAME, EMAIL) VALUES ("atutor", "password", "false", "A", "Tutor", "atutor@uiowa.edu");
INSERT INTO USER_T (HAWKID, HASHED_PSSWRD, IS_ADMIN, FIRST_NAME, LAST_NAME, EMAIL) VALUES ("atutor2", "password", "false", "A", "Tutor2", "atutor2@uiowa.edu");
INSERT INTO USER_T (HAWKID, HASHED_PSSWRD, IS_ADMIN, FIRST_NAME, LAST_NAME, EMAIL) VALUES ("atutor3", "password", "false", "A", "Tutor3", "atutor3@uiowa.edu");

INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("tutor", "atutor", "CS1120");
INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("student", "awolmutt", "CS1120");
INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("admin", "jsmith", "CS1120");
INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("student", "jdoe", "CS1120");
INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("student", "awolmutt", "MATH1340");
INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("tutor", "atutor", "MATH1340");
INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("tutor", "atutor2", "MATH1340");
INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("tutor", "atutor2", "CS1120");
INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("tutor", "atutor3", "CS1120");
INSERT INTO ROLE_T (DESCRIPTION, HAWKID, COURSE_ID) VALUES ("tutor", "atutor3", "PHYS1440");

INSERT INTO TIME_SLOT(DATE_TIME, CANCELLED_BY_STUD, CANCELLED_BY_TUTOR, IS_BOOKED, COURSE_ID, HAWKID ) VALUES ("Monday 8:00am", "false", "false","false", "CS1120", "atutor"); 
INSERT INTO TIME_SLOT(DATE_TIME, CANCELLED_BY_STUD, CANCELLED_BY_TUTOR, IS_BOOKED, COURSE_ID, HAWKID )  VALUES ("Monday 1:00pm", "false", "false", "false",  "CS1120", "atutor"); 
INSERT INTO TIME_SLOT(DATE_TIME, CANCELLED_BY_STUD, CANCELLED_BY_TUTOR, IS_BOOKED, COURSE_ID, HAWKID )  VALUES ("Tuesday 1:00pm", "false", "false", "false", "CS1120", "atutor"); 
INSERT INTO TIME_SLOT(DATE_TIME, CANCELLED_BY_STUD, CANCELLED_BY_TUTOR, IS_BOOKED, COURSE_ID, HAWKID )  VALUES ("Monday 9:00am", "false", "false", "false", "MATH1340", "atutor2"); 
INSERT INTO TIME_SLOT(DATE_TIME, CANCELLED_BY_STUD, CANCELLED_BY_TUTOR, IS_BOOKED, COURSE_ID, HAWKID )  VALUES ("Monday 2:00pm", "false", "false", "false", "CS1120", "atutor2"); 
INSERT INTO TIME_SLOT(DATE_TIME, CANCELLED_BY_STUD, CANCELLED_BY_TUTOR, IS_BOOKED, COURSE_ID, HAWKID )  VALUES ("Tuesday 8:00pm", "false", "false", "false", "CS1120", "atutor3");
INSERT INTO TIME_SLOT(DATE_TIME, CANCELLED_BY_STUD, CANCELLED_BY_TUTOR, IS_BOOKED, COURSE_ID, HAWKID ) VALUES ("Monday 8:00am", "false", "false","false", "PHYS1440", "atutor"); 

